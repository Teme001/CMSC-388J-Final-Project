<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Feed</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="{{url_for('static', filename='account.css')}}">

  <!-- Bootstrap Icons  -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  
  <!-- Font Awesome -->
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    rel="stylesheet"
  />
  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    rel="stylesheet"
  />
  <!-- MDB -->
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.2.0/mdb.min.css"
    rel="stylesheet"
  />
    
  <!-- MDB -->
  <script defer
    type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.2.0/mdb.min.js"
  ></script>
</head>

  
<body>
<div id="div-nav">
  <!-- Navbar-->
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid justify-content-between">
      <!-- Left elements -->
      <div class="d-flex">
        <!-- Brand -->
        <a 
          class="navbar-brand me-2 mb-1 d-flex align-items-center" href="{{url_for('main.index')}}">
          <img
            src="{{url_for('static', filename = 'M_logo.png')}}"
            height="40"
            alt="MDB Logo"
            loading="lazy"
            style="margin-top: 2px;"
          />
        </a>
  
        <!-- Search form -->
        <form class="input-group w-auto my-auto d-none d-sm-flex"  action="{{ url_for('social.search_users') }}" method="get">
          <input
            autocomplete="off"
            type="search"
            name="query"
            class="form-control rounded"
            placeholder="Search for users"
            style="min-width: 125px;"
          />
          <span class="input-group-text border-0 d-none d-lg-flex"
            ><i class="fas fa-search"></i
          ></span>
        </form>
      </div>
      <!-- Left elements -->

      
      <!-- Center elements -->
      <ul class="navbar-nav flex-row d-none d-md-flex">
        <li class="nav-item me-3 me-lg-1">
          <a class="nav-link" href="#">
            <span><i class="fas fa-flag fa-lg"></i></span>
          </a>
        </li>
  
        <li class="nav-item me-3 me-lg-1">
          <a class="nav-link" href="{{url_for('social.videos')}}">
            <span><i class="fas fa-video fa-lg"></i></span>
          </a>
        </li>
  
        <li class="nav-item me-3 me-lg-1">
          <a class="nav-link" href= "{{ url_for('social.marketplace') }}">
            <span><i class="fas fa-shopping-bag fa-lg"></i></span>
          </a>
        </li>
  
        <li class="nav-item me-3 me-lg-1">
          <a class="nav-link" href="{{ url_for('users.get_all_users')}} ">
            <span><i class="fas fa-users fa-lg"></i></span>
            <span class="badge rounded-pill badge-notification bg-danger"></span>
          </a>
        </li>
      </ul>
      <!-- Center elements -->


      
      <!-- Right elements -->
      <ul class="navbar-nav flex-row">
        
        <!-- Messages Icon -->
        <li class="nav-item dropdown me-3 me-lg-1">
          <a
            class="nav-link dropdown-toggle hidden-arrow"
            href="#"
            id="navbarDropdownMenuLink"
            role="button"
            data-mdb-toggle="dropdown"
            aria-expanded="false"
          >
            <i class="fas fa-comments fa-lg"></i>
  
            <span class="badge rounded-pill badge-notification bg-danger">6</span>
          </a>
          <ul
            class="dropdown-menu dropdown-menu-end"
            aria-labelledby="navbarDropdownMenuLink"
          >
            <li>
              <a class="dropdown-item" href="#">Some news</a>
            </li>
            <li>
              <a class="dropdown-item" href="#">Another news</a>
            </li>
            <li>
              <a class="dropdown-item" href="#">Something else here</a>
            </li>
          </ul>
        </li>

        <!-- Notification Icon -->
        <li class="nav-item dropdown me-3 me-lg-1">
          <a
            class="nav-link dropdown-toggle hidden-arrow"
            href="#"
            id="navbarDropdownMenuLink"
            role="button"
            data-mdb-toggle="dropdown"
            aria-expanded="false"
          >
            <i class="fas fa-bell fa-lg"></i>
            <span class="badge rounded-pill badge-notification 
              bg-danger">12
            </span>
          </a>
          
          <ul
            class="dropdown-menu dropdown-menu-end"
            aria-labelledby="navbarDropdownMenuLink"
          >
            <li>
              <a class="dropdown-item" href="#">Some news</a>
            </li>
            <li>
              <a class="dropdown-item" href="#">Another news</a>
            </li>
            <li>
              <a class="dropdown-item" href="#">
                Something else here</a>
            </li>
          </ul>
        </li>

        
        <!-- Avatar Icon -->
        <div class="dropdown" id="div-avatar">
          <a
            class="dropdown-toggle d-flex align-items-center hidden-arrow"
            href="#"
            id="navbarDropdownMenuAvatar"
            role="button"
            data-mdb-toggle="dropdown"
            aria-expanded="false"
          >
            <img
              src="data:image/png;base64,{{image}}"
              class="rounded-circle"
              height="35"
              alt="Profile image small"
              loading="lazy"
            />
          </a>
          <ul
            class="dropdown-menu dropdown-menu-end"
            aria-labelledby="navbarDropdownMenuAvatar"
          >
            <li>
              <a class="dropdown-item" href="{{ url_for('social.profile', user_id=current_user.get_id()) }}">My profile</a>
            </li>
            <li>
              <a class="dropdown-item" href="{{url_for('social.settings')}}">Settings</a>
            </li>
            <li>
              <a class="dropdown-item" 
                href="{{ url_for('users.logout') }}">Logout</a>
            </li>
          </ul>
        </div>

      </ul>
      <!-- Right elements -->
      
    </div>
  </nav>
  </div>


  <br>
  <div class="container"
  <center>
    <h1> Feed page</h1>
  </header>
<h2>Weather data</h2>
{% if weather_data %}
  <p>Temperature: {{ weather_data.temp }} Â°F</p>
  <p>Humidity: {{ weather_data.humidity }} %</p>
{% else %}
  <p>Weather data not available</p>
{% endif %}
  </center>
    
  


 <br> <br>
<div class="d-flex flex-column justify-content-center align-items-center p-3">
  
  {% for post in posts %}
  <div class="card mb-2 text-center" style="width:25rem;">
    {% if post.image %}
    <img class="card-img-top" src="{{ url_for('images', filename=post.image) }}"> 
    {% endif %}
    <div class="card-body">
      <h3>{{ post.title }}</h3>
      <p>{{ post.author.username }}: {{ post.body }}</p> 
    </div>   
  </div>
  {% endfor %}
    

  <div class="align-items-center col-xl-5 col-md-8 p-2">
              <form method="POST" action = "{{ url_for('social.feed')}}" class="bg-white rounded shadow-5-strong p-5">
                 {{ form.csrf_token }}


                <div class="d-flex align-items-center mb-3 pb-1">
                  <img class="logo" src = "{{url_for('static', filename = 'M_logo.png')}}" width="30" height="30">
                <span class="h1 fw-bold mb-0"> Terp Net </span>
                </div>

                <h5 class="fw-normal mb-3 pb-3" style="letter-spacing: 1px;">Post to your fellow terps</h5>
                
                <!-- Title input -->
                <div class="form-outline mb-4">
                  {{ form.title(class="form-control")}}
                  <label class="form-label" for="username">
                    Post Title
                  </label>
                  {% if form.title.errors %}
                    <div class="alert alert-warning" role="alert">
                    {% for error in form.title.errors %}
                      <span>{{ error }}</span>
                    {% endfor %}
                    </div>
                  {% endif %}
                </div>

                <!-- Body input -->
                <div class="form-outline mb-4">
                  {{ form.body(class="form-control") }}
                  <label class="form-label" for="email">
                    Post Body
                  </label>
                  {% if form.body.errors %}
                    <div class="alert alert-warning" role="alert">
                    {% for error in form.body.errors %}
                      <span>{{ error }}</span>
                    {% endfor %}
                    </div>
                  {% endif %}
                </div>

                <!-- Image upload -->
                <div class="form-group">
                    <label for="image">Image </label>
                    <div class="input-group mb-3">
                      {{ form.image(type="file", class="form-control", id="image") }}  
                    </div>
                  </div>
                  <!-- /Post button -->
                <button type="submit" class="btn btn-primary btn-block">
                  Post!
                </button>
                </div>

                
              </form>
            </div>
  </div>

          <br> <br>
  


  <footer>
    <ul>
      <li><a href = "#"> Support</a></li>
      <li><a href = "#"> Contact</a></li>
    </ul>
      <p>&copy; 2023 Social media app name. All rights reserved.</p>
  </footer>
  <script src = "{{url_for('static', filename = 'custom.js')}}"></script>
</body>
</html>